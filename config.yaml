# RNA-seq Pipeline Configuration File - TEMPLATE
# 
# 사용 방법:
# 1. 이 파일을 복사하여 프로젝트별 설정 파일 생성: cp config.yaml config_<project_name>.yaml
# 2. 프로젝트에 맞게 설정 수정
# 3. Snakemake 실행 시 --configfile 옵션 사용: snakemake --configfile config_<project_name>.yaml
#
# 예시: snakemake --configfile config_H2O2_astrocyte.yaml -j 12
#
# 주의: config_*.yaml 파일은 .gitignore에 등록되어 있어 Git에서 추적되지 않습니다.

# === Directory Structure ===
# Input/Output directory configuration
data_dir: "data"  # Base data directory
raw_data_subdir: "raw"  # Subdirectory for raw FASTQ files (within data_dir)

results_dir: "results"  # Base results directory
trimmed_subdir: "trimmed"  # Subdirectory for trimmed reads
aligned_subdir: "aligned"  # Subdirectory for aligned BAM files
counts_subdir: "counts"  # Subdirectory for count matrices
qc_subdir: "qc"  # Subdirectory for QC reports

logs_dir: "logs"  # Base logs directory

# === Reference Files ===
genome_dir: "genome"  # Base genome directory
star_index: "genome/star_index/"  # STAR genome index directory
annotation_gtf: "genome/genes.gtf"  # Gene annotation GTF file

# === Adapter Sequences ===
# Illumina TruSeq adapters (default)
adapter_r1: "AGATCGGAAGAGCACACGTCTGAACTCCAGTCA"
adapter_r2: "AGATCGGAAGAGCGTCGTGTAGGGAAAGAGTGT"

# === Quality Control Parameters ===
quality_cutoff: 20  # Minimum base quality for trimming
min_read_length: 20  # Minimum read length after trimming
fastqc_threads: 2  # Number of threads for FastQC

# === Trimming Parameters ===
cutadapt_threads: 4  # Number of threads for cutadapt trimming

# === Alignment Parameters ===
star_threads: 12  # Number of threads for STAR alignment (optimized for 12-core CPU)
star_memory_gb: 35  # Memory limit per STAR job in GB (adjust based on available RAM)
star_sort_memory_bytes: 30000000000  # RAM limit for BAM sorting (30GB)
gzipped_fastq: true  # Whether input FASTQ files are gzipped

# === Quantification Parameters ===
featurecounts_threads: 8  # Number of threads for featureCounts (increased for better performance)
feature_type: "exon"  # Feature type to count (exon, gene, etc.)
attribute_type: "gene_id"  # GTF attribute to use as feature ID
strandedness: 0  # 0=unstranded, 1=stranded (forward), 2=stranded (reverse)

# === QC Report Parameters ===
generate_qc_report: true  # Whether to generate HTML QC report (set to true to enable)
qc_report_filename: "qc_report.html"  # QC report filename (will be placed in results_dir)
qc_top_genes: 10  # Number of top expressed genes to show per sample

# === FastQC Auto-Evaluation Parameters ===
# These thresholds are used for automatic QC evaluation
# Based on FASTQC_GUIDE.md recommendations for RNA-seq data
fastqc_evaluation:
  enabled: true  # Enable automatic FastQC evaluation
  
  # Basic Statistics thresholds
  min_total_sequences: 1000000  # Minimum number of reads (1M)
  min_gc_content: 30  # Minimum GC% (species-dependent)
  max_gc_content: 70  # Maximum GC% (species-dependent)
  
  # Quality Score thresholds
  min_median_quality: 28  # Minimum median Phred score (Q28+)
  min_lower_quartile: 20  # Minimum lower quartile Phred score (Q20+)
  min_q30_percentage: 75  # Minimum percentage of reads with Q30+ (75%)
  
  # N content thresholds
  max_n_content: 5.0  # Maximum N% allowed (5%)
  critical_n_content: 10.0  # Critical N% threshold (10%)
  
  # Adapter content thresholds
  max_adapter_trimmed: 1.0  # Maximum adapter% after trimming (1%)
  warn_adapter_raw: 10.0  # Warning threshold for raw data adapter% (10%)
  
  # Output files
  evaluation_report: "fastqc_evaluation.txt"  # Text report file
  evaluation_json: "fastqc_evaluation.json"  # JSON results file
