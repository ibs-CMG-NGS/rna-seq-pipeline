# RNA-seq Pipeline Configuration File - Human H2O2 Project
# 
# Project: Human mRNA H2O2 treatment analysis
# Date: 2025-01-27
# Species: Human (GRCh38)

# === Directory Structure ===
# Input/Output directory configuration
data_dir: "/home/ngs/data/ygkim/2025/H2O2_human_mRNA"  # FASTQ 파일 위치
raw_data_subdir: ""  # FASTQ 파일이 data_dir 바로 아래에 있으므로 비워둠

# === Standardized Output Structure ===
# 표준 디렉토리 구조: {base_results_dir}/{project_id}/{sample_id}/{pipeline_type}/
use_standard_structure: true  # 표준 디렉토리 구조 사용 여부
project_id: "H2O2_human_2025"  # 프로젝트 ID (samples_master.csv와 일치)
pipeline_type: "rna-seq"  # 파이프라인 타입

# Legacy structure (use_standard_structure: false인 경우)
results_dir: "/home/ngs/data/h-rna-seq-pipeline-results"  # 기존 결과 저장 위치
trimmed_subdir: "trimmed"  # Subdirectory for trimmed reads
aligned_subdir: "aligned"  # Subdirectory for aligned BAM files
counts_subdir: "counts"  # Subdirectory for count matrices
qc_subdir: "qc"  # Subdirectory for QC reports
logs_dir: "/home/ngs/data/h-rna-seq-pipeline-results/logs"  # 로그 파일 저장 위치

# Standard structure (use_standard_structure: true인 경우)
base_results_dir: "/home/ngs/data/results"  # 표준 결과 베이스 디렉토리
# 실제 경로: {base_results_dir}/{project_id}/{sample_id}/{pipeline_type}/

# === Reference Files ===
genome_dir: "/home/ngs/data/genome/human_GRCh38"  # Human genome reference 위치
star_index: "/home/ngs/data/genome/human_GRCh38/star_index/"  # STAR genome index directory
annotation_gtf: "/home/ngs/data/genome/human_GRCh38/genes.gtf"  # Gene annotation GTF file

# === Adapter Sequences ===
# Illumina TruSeq adapters (default)
adapter_r1: "AGATCGGAAGAGCACACGTCTGAACTCCAGTCA"
adapter_r2: "AGATCGGAAGAGCGTCGTGTAGGGAAAGAGTGT"

# === Quality Control Parameters ===
quality_cutoff: 20  # Minimum base quality for trimming
min_read_length: 20  # Minimum read length after trimming
fastqc_threads: 2  # Number of threads for FastQC

# === Trimming Parameters ===
cutadapt_threads: 4  # Number of threads for cutadapt trimming

# === Alignment Parameters ===
star_threads: 12  # Number of threads for STAR alignment (서버 코어 수에 맞게 조정)
star_memory_gb: 35  # Memory limit per STAR job in GB (서버 RAM에 맞게 조정)
star_sort_memory_bytes: 30000000000  # RAM limit for BAM sorting (30GB)
gzipped_fastq: true  # FASTQ files are gzipped

# === Quantification Parameters ===
featurecounts_threads: 8  # Number of threads for featureCounts
feature_type: "exon"  # Feature type to count
attribute_type: "gene_id"  # GTF attribute to use as feature ID
strandedness: 0  # 0=unstranded, 1=stranded (forward), 2=stranded (reverse) - 시퀀싱 프로토콜 확인 필요

# === QC Report Parameters ===
generate_qc_report: true  # Generate HTML QC report
generate_multiqc: true  # Generate MultiQC comprehensive report
qc_report_filename: "qc_report.html"  # QC report filename
qc_top_genes: 10  # Number of top expressed genes to show per sample

# === FastQC Auto-Evaluation Parameters ===
fastqc_evaluation:
  enabled: true  # Enable automatic FastQC evaluation
  
  # Basic Statistics thresholds (Human RNA-seq)
  min_total_sequences: 5000000  # Minimum 5M reads for human RNA-seq
  min_gc_content: 35  # Human genome GC content ~40-45%
  max_gc_content: 65  # Human genome GC content ~40-45%
  
  # Quality Score thresholds
  min_median_quality: 28  # Minimum median Phred score (Q28+)
  min_lower_quartile: 20  # Minimum lower quartile Phred score (Q20+)
  min_q30_percentage: 75  # Minimum percentage of reads with Q30+ (75%)
  
  # N content thresholds
  max_n_content: 5.0  # Maximum N% allowed (5%)
  critical_n_content: 10.0  # Critical N% threshold (10%)
  
  # Adapter content thresholds
  max_adapter_trimmed: 1.0  # Maximum adapter% after trimming (1%)
  warn_adapter_raw: 10.0  # Warning threshold for raw data adapter% (10%)
  
  # Output files
  evaluation_report: "fastqc_evaluation.txt"  # Text report file
  evaluation_json: "fastqc_evaluation.json"  # JSON results file
